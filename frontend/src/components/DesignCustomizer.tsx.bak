
export interface DesignSettings {
    font: 'sans' | 'serif' | 'mono';
    colors: {
        primary: string;
        secondary: string;
        text: string;
        background: string;
    };
    alignment: 'left' | 'center' | 'right';
    tableStyle: 'minimal' | 'bordered' | 'striped';
    layout: {
        header: 'left' | 'center' | 'split';
        footer: 'compact' | 'detailed';
    };
    fontSize: 'sm' | 'md' | 'lg';
}

interface DesignCustomizerProps {
    settings: DesignSettings;
    onChange: (settings: DesignSettings) => void;
}

const fontOptions = [
    { value: 'sans' as const, label: 'Sans Serif', preview: 'Aa', class: 'font-sans' },
    { value: 'serif' as const, label: 'Serif', preview: 'Aa', class: 'font-serif' },
    { value: 'mono' as const, label: 'Monospace', preview: 'Aa', class: 'font-mono' }
];

const colorPresets = {
    professional: { primary: '#1e40af', secondary: '#3b82f6', text: '#1e293b', background: '#f8fafc' },
    elegant: { primary: '#6b21a8', secondary: '#a855f7', text: '#171717', background: '#fafafa' },
    modern: { primary: '#059669', secondary: '#10b981', text: '#0f172a', background: '#f0fdf4' },
    classic: { primary: '#0369a1', secondary: '#0ea5e9', text: '#1e293b', background: '#f8fafc' }
};

export default function DesignCustomizer({ settings, onChange }: DesignCustomizerProps) {
    const updateKeys = <K extends keyof DesignSettings>(key: K, value: DesignSettings[K]) => {
        onChange({ ...settings, [key]: value });
    };

    const updateColors = (colorKey: keyof DesignSettings['colors'], value: string) => {
        onChange({
            ...settings,
            colors: { ...settings.colors, [colorKey]: value }
        });
    };

    const updateLayout = (layoutKey: keyof DesignSettings['layout'], value: any) => {
        onChange({
            ...settings,
            layout: { ...settings.layout, [layoutKey]: value }
        });
    };

    const applyPreset = (presetName: keyof typeof colorPresets) => {
        updateKeys('colors', colorPresets[presetName]);
    };

    return (
        <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-6 space-y-6">
            <div>
                <h3 className="text-lg font-bold text-slate-900 mb-1">Design Customization</h3>
                <p className="text-sm text-slate-600">Customize your invoice appearance</p>
            </div>

            {/* Font Selection */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Font Family</label>
                <div className="grid grid-cols-3 gap-2">
                    {fontOptions.map((font) => (
                        <button
                            key={font.value}
                            onClick={() => updateKeys('font', font.value)}
                            className={`p-4 border-2 rounded-lg transition-all ${settings.font === font.value
                                ? 'border-indigo-600 bg-indigo-50 shadow-md'
                                : 'border-slate-200 hover:border-indigo-300'
                                }`}
                        >
                            <div className={`text-3xl font-bold mb-1 ${font.class}`}>{font.preview}</div>
                            <div className="text-xs font-medium text-slate-700">{font.label}</div>
                        </button>
                    ))}
                </div>
            </div>

            {/* Color Presets */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Color Presets</label>
                <div className="grid grid-cols-2 gap-2">
                    {Object.entries(colorPresets).map(([name, colors]) => (
                        <button
                            key={name}
                            onClick={() => applyPreset(name as keyof typeof colorPresets)}
                            className="p-3 border-2 border-slate-200 rounded-lg hover:border-indigo-300 transition-all text-left"
                        >
                            <div className="flex items-center gap-2 mb-2">
                                <div className="w-6 h-6 rounded-full" style={{ backgroundColor: colors.primary }} />
                                <div className="w-6 h-6 rounded-full" style={{ backgroundColor: colors.secondary }} />
                                <span className="text-xs font-semibold text-slate-700 capitalize">{name}</span>
                            </div>
                        </button>
                    ))}
                </div>
            </div>

            {/* Custom Colors */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Custom Colors</label>
                <div className="grid grid-cols-2 gap-3">
                    <div>
                        <label className="block text-xs font-medium text-slate-600 mb-1">Primary</label>
                        <div className="flex gap-2">
                            <input
                                type="color"
                                value={settings.colors.primary}
                                onChange={(e) => updateColors('primary', e.target.value)}
                                className="w-12 h-10 rounded cursor-pointer"
                            />
                            <input
                                type="text"
                                value={settings.colors.primary}
                                onChange={(e) => updateColors('primary', e.target.value)}
                                className="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"
                            />
                        </div>
                    </div>
                    <div>
                        <label className="block text-xs font-medium text-slate-600 mb-1">Secondary</label>
                        <div className="flex gap-2">
                            <input
                                type="color"
                                value={settings.colors.secondary}
                                onChange={(e) => updateColors('secondary', e.target.value)}
                                className="w-12 h-10 rounded cursor-pointer"
                            />
                            <input
                                type="text"
                                value={settings.colors.secondary}
                                onChange={(e) => updateColors('secondary', e.target.value)}
                                className="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"
                            />
                        </div>
                    </div>
                    <div>
                        <label className="block text-xs font-medium text-slate-600 mb-1">Text</label>
                        <div className="flex gap-2">
                            <input
                                type="color"
                                value={settings.colors.text}
                                onChange={(e) => updateColors('text', e.target.value)}
                                className="w-12 h-10 rounded cursor-pointer"
                            />
                            <input
                                type="text"
                                value={settings.colors.text}
                                onChange={(e) => updateColors('text', e.target.value)}
                                className="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"
                            />
                        </div>
                    </div>
                    <div>
                        <label className="block text-xs font-medium text-slate-600 mb-1">Background</label>
                        <div className="flex gap-2">
                            <input
                                type="color"
                                value={settings.colors.background}
                                onChange={(e) => updateColors('background', e.target.value)}
                                className="w-12 h-10 rounded cursor-pointer"
                            />
                            <input
                                type="text"
                                value={settings.colors.background}
                                onChange={(e) => updateColors('background', e.target.value)}
                                className="flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm font-mono"
                            />
                        </div>
                    </div>
                </div>
            </div>

            {/* Alignment */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Text Alignment</label>
                <div className="grid grid-cols-3 gap-2">
                    {(['left', 'center', 'right'] as const).map((align) => (
                        <button
                            key={align}
                            onClick={() => updateKeys('alignment', align)}
                            className={`p-3 border-2 rounded-lg transition-all ${settings.alignment === align
                                ? 'border-indigo-600 bg-indigo-50'
                                : 'border-slate-200 hover:border-indigo-300'
                                }`}
                        >
                            <div className="text-xs font-medium text-slate-700 capitalize">{align}</div>
                        </button>
                    ))}
                </div>
            </div>

            {/* Table Style */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Table Style</label>
                <div className="grid grid-cols-3 gap-2">
                    {(['minimal', 'bordered', 'striped'] as const).map((style) => (
                        <button
                            key={style}
                            onClick={() => updateKeys('tableStyle', style)}
                            className={`p-3 border-2 rounded-lg transition-all ${settings.tableStyle === style
                                ? 'border-indigo-600 bg-indigo-50'
                                : 'border-slate-200 hover:border-indigo-300'
                                }`}
                        >
                            <div className="text-xs font-medium text-slate-700 capitalize">{style}</div>
                        </button>
                    ))}
                </div>
            </div>

            {/* Header Layout */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Header Layout</label>
                <div className="grid grid-cols-3 gap-2">
                    {(['left', 'center', 'split'] as const).map((layout) => (
                        <button
                            key={layout}
                            onClick={() => updateLayout('header', layout)}
                            className={`p-3 border-2 rounded-lg transition-all ${settings.layout.header === layout
                                ? 'border-indigo-600 bg-indigo-50'
                                : 'border-slate-200 hover:border-indigo-300'
                                }`}
                        >
                            <div className="text-xs font-medium text-slate-700 capitalize">{layout}</div>
                        </button>
                    ))}
                </div>
            </div>

            {/* Footer Layout */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Footer Layout</label>
                <div className="grid grid-cols-2 gap-2">
                    {(['compact', 'detailed'] as const).map((layout) => (
                        <button
                            key={layout}
                            onClick={() => updateLayout('footer', layout)}
                            className={`p-3 border-2 rounded-lg transition-all ${settings.layout.footer === layout
                                ? 'border-indigo-600 bg-indigo-50'
                                : 'border-slate-200 hover:border-indigo-300'
                                }`}
                        >
                            <div className="text-xs font-medium text-slate-700 capitalize">{layout}</div>
                        </button>
                    ))}
                </div>
            </div>

            {/* Font Size */}
            <div>
                <label className="block text-sm font-semibold text-slate-700 mb-3">Font Size</label>
                <div className="grid grid-cols-3 gap-2">
                    {(['sm', 'md', 'lg'] as const).map((size) => (
                        <button
                            key={size}
                            onClick={() => updateKeys('fontSize', size)}
                            className={`p-3 border-2 rounded-lg transition-all ${settings.fontSize === size
                                ? 'border-indigo-600 bg-indigo-50'
                                : 'border-slate-200 hover:border-indigo-300'
                                }`}
                        >
                            <div className="text-xs font-medium text-slate-700 uppercase">{size}</div>
                        </button>
                    ))}
                </div>
            </div>
        </div>
    );
}
